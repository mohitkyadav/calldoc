{% extends 'base.html' %}
{% block title %}
    Password Settings
{% endblock %}
{% block body %}
  <h2 class="uk-text-bold uk-text-center uk-padding-small">Set/Reset Password</h2>
    <div class="uk-card uk-card-default uk-width-1-2@m uk-text-center uk-card-body uk-align-center uk-margin-medium-top uk-margin-auto-bottom">
        <p class="uk-text-primary uk-text-bold">Your username: {{ user.username }}</p>
        {% if not user.has_usable_password %}
              <p class="uk-text-danger uk-text-bold">You have not defined a password yet.</p>
              <form method="post">
                {% csrf_token %}
                <div class="uk-margin">
                    <div class="uk-inline">
                        <label for="id_password1" class="uk-form-icon" uk-icon="icon: lock"></label>
                        <input class="uk-input" type="password" name="password1" required="" id="id_password1" placeholder="New Password" autofocus="">
                    </div>
                </div>

                 <div class="uk-margin">
                    <div class="uk-inline">
                        <label for="id_password2" class="uk-form-icon" uk-icon="icon: lock"></label>
                        <input class="uk-input" type="password" name="password2" required="" placeholder="Confirm Password" id="id_password2" autofocus="">
                    </div>
                </div>
                {% for error_message in form.errors.items %}
                    <div class="uk-text-danger uk-text-bold uk-margin-small-bottom">
                        {{ error_message|striptags }}
                    </div>
                {% endfor %}
                <button class="uk-button uk-button-danger" type="submit">Set Password</button>
             </form>

         {% else %}
         <p class="uk-text-success uk-text-bold">Your password is set.</p>
         <form method="post">
            {% csrf_token %}
            <div class="uk-margin">
                <div class="uk-inline">
                    <label for="id_old_password" class="uk-form-icon" uk-icon="icon: lock"></label>
                    <input class="uk-input" type="password" name="old_password" autofocus="" id="id_old_password" placeholder="Old Password" required="">
                </div>
            </div>

            <div class="uk-margin">
                <div class="uk-inline">
                    <label for="id_new_password1" class="uk-form-icon" uk-icon="icon: lock"></label>
                    <input class="uk-input" type="password" name="new_password1" autofocus="" id="id_new_password1" placeholder="New Password" required="">
                </div>
            </div>

             <div class="uk-margin">
                <div class="uk-inline">
                    <label for="id_new_password2" class="uk-form-icon" uk-icon="icon: lock"></label>
                    <input class="uk-input" type="password" name="new_password2" required="" placeholder="Confirm Password" id="id_new_password2">
                </div>
            </div>
            {% for error_message in form.errors.items %}
                <div class="uk-text-danger uk-text-bold uk-margin-small-bottom">
                    {{ error_message|striptags }}
                </div>
            {% endfor %}
            <button class="uk-button uk-button-danger" type="submit">Save changes</button>
         </form>
         {% endif %}

         {% for field in form %}
            <div class="uk-text-bold uk-margin-small-bottom">
                {% if field.help_text %}
                    <p>{{ field.help_text|safe }}</p>
                {% endif %}
            </div>
        {% endfor %}
    </div>
{% endblock %}
